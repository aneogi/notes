hadoop fs -ls /user/neogia01/sqoop_import/retail_db/user_items

hadoop fs -get /user/neogia01/sqoop_import/retail_db/order_items .

sqoop import \
--connect jdbc:mysql://ms.itversity.com:3306/retail_db \
--username retail_user \
--password itversity \
--table order_items \
--warehouse-dir /user/neogia01/sqoop_import/retail_db \
--delete-target-dir \
--as-avrodatafile

sqoop import -Dmapreduce.job.user.classpath.first=true \
--connect jdbc:mysql://ms.itversity.com:3306/retail_db \
--username retail_user \
--password itversity \
--table order_items \
--warehouse-dir /user/neogia01/sqoop_import/retail_db \
--delete-target-dir \
--as-avrodatafile \
--compress \
--compression-codec snappy

sqoop import \
--connect jdbc:mysql://ms.itversity.com:3306/retail_db \
--username retail_user \
--password itversity \
--table order_items \
--warehouse-dir /user/neogia01/sqoop_import/retail_db \
--delete-target-dir \
--as-parquetfile

sqoop import \
--connect jdbc:mysql://ms.itversity.com:3306/retail_db \
--username retail_user \
--password itversity \
--table order_items \
--warehouse-dir /user/neogia01/sqoop_import/retail_db \
--delete-target-dir \
--as-sequencefile

avro-tools getschema part-m-00000.avro

avro-tools tojson part-m-00000.avro

avro-tools tojson part-m-00000.avro >> part-m-00000.json

cat part-m-00000.json

wc -l part-m-00000.json

sqoop import \
--connect jdbc:mysql://ms.itversity.com:3306/retail_db \
--username retail_user \
--password itversity \
--table order_items \
--warehouse-dir /user/neogia01/sqoop_import/retail_db \
--delete-target-dir \
--compress

cd /etc/hadoop/conf

org.apache.hadoop.io.compress.SnappyCodec

##### Chapter #####

sqoop import \
--connect jdbc:mysql://ms.itversity.com:3306/retail_db \
--username retail_user \
--password itversity \
--table customers \
--columns customer_id,customer_fname,customer_lname,customer_street,customer_city,customer_state,customer_zipcode \
--warehouse-dir /user/neogia01/sqoop_import/retail_db \
--delete-target-dir

sqoop import \--connect jdbc:mysql://ms.itversity.com:3306/retail_db \--username retail_user \--password itversity \--table order_items \--warehouse-dir /user/neogia01/sqoop_import/retail_db \--boundary-query "SELECT 1, 172198" \--delete-target-dir

sqoop eval \--connect jdbc:mysql://ms.itversity.com:3306/retail_db \--username retail_user \--password itversity \--query "SELECT * FROM orders LIMIT 10"

sqoop eval \--connect jdbc:mysql://ms.itversity.com:3306/retail_db \--username retail_user \--password itversity \--query "SELECT * FROM orders WHERE order_status IN ('COMPLETE','CLOSED') AND order_date LIKE '2013-08%'"

sqoop import \--connect jdbc:mysql://ms.itversity.com:3306/retail_db \--username retail_user \--password itversity \--table orders \--warehouse-dir /user/neogia01/sqoop_import/retail_db \--delete-target-dir \--where "order_status IN ('COMPLETE','CLOSED') AND order_date LIKE '2013-08%'"

sqoop import \--connect jdbc:mysql://ms.itversity.com:3306/retail_db \--username retail_user \--password itversity \--table order_items \--warehouse-dir /user/neogia01/sqoop_import/retail_db \--delete-target-dir \--split-by order_item_order_id

sqoop import \--connect jdbc:mysql://ms.itversity.com:3306/retail_db \--username retail_user \--password itversity \--query "SELECT order_date, count(1) order_count from orders where \$CONDITIONS group by order_date" \--target-dir /user/neogia01/sqoop_import/retail_db/order_count_by_date \--split-by order_date \--delete-target-dir

sqoop import \--connect jdbc:mysql://ms.itversity.com:3306/retail_db \--username retail_user \--password itversity \--query "SELECT order_date, count(1) order_count from orders where \$CONDITIONS group by order_date" \--target-dir /user/neogia01/sqoop_import/retail_db/order_count_by_date \--num-mappers 1 \--delete-target-dir

sqoop eval \--connect jdbc:mysql://ms.itversity.com:3306/nyse \--username nyse_user \--password itversity \--query "SHOW tables"

sqoop eval \--connect jdbc:mysql://ms.itversity.com:3306/nyse \--username nyse_user \--password itversity \--query "DESCRIBE stock_eod"

sqoop import \
"-Dorg.apache.sqoop.splitter.allow_text_splitter=true" \--connect jdbc:mysql://ms.itversity.com:3306/nyse \--username nyse_user \--password itversity \--table stock_eod \--warehouse-dir /user/neogia01/sqoop_import/nyse \--delete-target-dir

hadoop fs -tail /user/neogia01/sqoop_import/nyse/stock_eod/part-m-00003

sqoop list-tables \--connect jdbc:mysql://ms.itversity.com:3306/retail_db \--username retail_user \--password itversity

sqoop eval \--connect jdbc:mysql://ms.itversity.com:3306/retail_db \--username retail_user \--password itversity \--query "DESCRIBE order_items_nopk"

sqoop import \--connect jdbc:mysql://ms.itversity.com:3306/retail_db \--username retail_user \--password itversity \--table order_items_nopk \--warehouse-dir /user/neogia01/sqoop_import/retail_db \--delete-target-dir

sqoop import \--connect jdbc:mysql://ms.itversity.com:3306/retail_db \--username retail_user \--password itversity \--table order_items_nopk \--warehouse-dir /user/neogia01/sqoop_import/retail_db \--split-by order_item_id \--delete-target-dir

sqoop import \--connect jdbc:mysql://ms.itversity.com:3306/retail_db \--username retail_user \--password itversity \--table order_items_nopk \--warehouse-dir /user/neogia01/sqoop_import/retail_db \--num-mappers 1 \--delete-target-dir


